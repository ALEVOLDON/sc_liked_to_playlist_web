# SoundCloud Liked to Playlist Web (Refactored)

Этот проект позволяет собрать ваши лайки из SoundCloud, скачать их как MP3 файлы (пропуская миксы и подкасты) и слушать через локальный веб-плеер. Данная версия имеет улучшенную структуру проекта.

## Структура

* **`src/`**: Основной код Python, разделенный на модули.
* **`app/`**: Streamlit приложение для сбора лайков.
* **`web_player/`**: Статические файлы для веб-плеера (HTML, CSS, JS).
* **`data/`**: Входные данные (CSV), логи, архив скачанных, генерируемый JSON плейлист.
* **`downloads/`**: Папка для скачанных MP3 и обложек.
* **`downloads_backup/`**: Папка для бэкапов при очистке.
* **`run_downloader.py`**: Скрипт для запуска скачивания и генерации плейлистов.
* **`run_cleanup.py`**: Скрипт для запуска очистки папки `downloads`.
* **`requirements.txt`**: Зависимости Python.
* **`README.md`**: Этот файл.

## Установка

1.  **Клонируйте репозиторий или скачайте файлы.**
2.  **Установите Python 3**: Python 3.8+.
3.  **Установите Google Chrome**: Для `app/liker_app.py`.
4.  **Установите FFmpeg**: Для `yt-dlp`. Скачайте с [официального сайта](https://ffmpeg.org/download.html) и добавьте в PATH или поместите `ffmpeg.exe` (Windows) в корневую папку проекта.
5.  **Установите Python зависимости**:
    ```bash
    pip install -r requirements.txt
    ```

## Использование

1.  **Сбор лайков**:
    * Запустите Streamlit-приложение:
        ```bash
        streamlit run app/liker_app.py
        ```
    * Введите имя пользователя, настройте параметры (опционально) и нажмите "Собрать лайки". Будет создан/перезаписан файл `data/liked_tracks.csv`.

2.  **Скачивание треков и создание плейлистов**:
    * (Опционально) Отредактируйте настройки в `src/config.py`.
    * Запустите скрипт скачивания:
        ```bash
        python run_downloader.py
        ```
    * Треки скачаются в `downloads/`, плейлист будет создан в `web_player/playlist.json`. Логи сохранятся в `data/`.

3.  **Запуск веб-плеера**:
    * Перейдите в папку `web_player`:
        ```bash
        cd web_player
        ```
    * Запустите веб-сервер:
        ```bash
        python -m http.server 8000
        ```
    * Откройте в браузере: `http://localhost:8000/`

4.  **Очистка (опционально)**:
    * Запустите скрипт очистки:
        ```bash
        python run_cleanup.py
        ```
    * Будет создана папка-бэкап, а из `downloads/` удалены миксы/подкасты.
    * **Важно:** После очистки запустите `python run_downloader.py --skip-download`, чтобы обновить `web_player/playlist.json`.

## Настройки

* Основные настройки скачивания и фильтрации находятся в `src/config.py`.
* Настройки скрапинга можно задать в интерфейсе Streamlit приложения.